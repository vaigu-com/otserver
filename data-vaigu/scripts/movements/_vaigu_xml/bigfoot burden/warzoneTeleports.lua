local teleGnome = {
	{ posCrystal = { x = 7330, y = 1337, z = 8 }, posGo = { x = 6448, y = 1844, z = 10 }, needItem = true, idItem = 16167 }, -- do crystal de gnome base para kazordon
	{ posCrystal = { x = 6449, y = 1844, z = 10 }, posGo = { x = 7330, y = 1336, z = 8 }, needItem = true, idItem = 16167 }, -- do crystal de kazordon para gnome base
	--{posCrystal = {x=32772,y=31776,z=9}, posGo = {x=32402,y=32817,z=6}, needItem = false, idItem = 16167}, --
	--{posCrystal = {x=32403,y=32818,z=6}, posGo = {x=32774,y=31775,z=9}, needItem = false, idItem = 16167}, --
	--{posCrystal = {x=32786,y=31754,z=9}, posGo = {x = 32194, y = 31183, z = 8}, needItem = false, idItem = 16167}, --
	--{posCrystal = {x=32196,y =31183,z=8}, posGo = {x=32787,y=31755,z=9}, needItem = false, idItem = 16167}, --
	--{posCrystal = {x=32827,y=31757,z=9}, posGo = {x=33185,y=32384,z=8}, needItem = false, idItem = 16167}, --
	--{posCrystal = {x=33187,y=32384,z=8}, posGo = {x=32826,y=31759,z=9}, needItem = false, idItem = 16167}, --
	--{posCrystal = {x=32831,y=31797,z=9}, posGo = {x=33153,y=31832,z=10}, needItem = false, idItem = 16167}, --
	--{posCrystal = {x=33154,y=31834,z=10}, posGo = {x=32830,y=31796,z=9}, needItem = false, idItem = 16167}, --
	--{posCrystal = {x=32805,y=31743,z=9}, posGo = {x=32331,y=32173,z=9}, needItem = false, idItem = 16167}, --
	--{posCrystal = {x=32330,y=32173,z=9}, posGo = {x=32806,y=31745,z=9}, needItem = false, idItem = 16167}, --
	{ posCrystal = { x = 7323, y = 1319, z = 9 }, posGo = { x = 7399, y = 1362, z = 8 }, needItem = true, idItem = 16167 }, -- do crystal de gnome base para gnome alpha
	{ posCrystal = { x = 7399, y = 1361, z = 8 }, posGo = { x = 7323, y = 1318, z = 9 }, needItem = true, idItem = 16167 }, -- do crystal de gnome alpha para gnome base
	{ posCrystal = { x = 7322, y = 1300, z = 9 }, posGo = { x = 7413, y = 1370, z = 12 }, needItem = true, idItem = 16167 }, -- do crystal de gnome base para crystal ground
	{ posCrystal = { x = 7413, y = 1371, z = 12 }, posGo = { x = 7322, y = 1301, z = 9 }, needItem = true, idItem = 16167 }, -- do crystal de crystal ground para gnome base
	{ posCrystal = { x = 7330, y = 1284, z = 9 }, posGo = { x = 7280, y = 1348, z = 11 }, needItem = true, idItem = 16167 }, -- do crystal de gnome base para truffels garden
	{ posCrystal = { x = 7280, y = 1349, z = 11 }, posGo = { x = 7330, y = 1285, z = 9 }, needItem = true, idItem = 16167 }, -- do crystal de truffels garden para gnome base
	{ posCrystal = { x = 7409, y = 1423, z = 9 }, posGo = { x = 7426, y = 1381, z = 8 }, needItem = false, idItem = 16167 }, -- do crystal de WARZONE 1 para Gnome alpha
	{ posCrystal = { x = 7416, y = 1418, z = 9 }, posGo = { x = 7421, y = 1422, z = 9 }, needItem = false, idItem = 16167 }, -- do crystal de WARZONE 1 DENTRO para WARZONE 1 FORA
	{ posCrystal = { x = 7420, y = 1421, z = 9 }, posGo = { x = 7415, y = 1418, z = 9 }, needItem = false, idItem = 16167 }, -- do crystal de WARZONE 1 FORA para WARZONE 1 DENTRO
	{ posCrystal = { x = 7424, y = 1444, z = 10 }, posGo = { x = 7432, y = 1387, z = 8 }, needItem = false, idItem = 16167 }, -- do crystal de WARZONE 2 para Gnome alpha
	{ posCrystal = { x = 7424, y = 1436, z = 10 }, posGo = { x = 7427, y = 1434, z = 10 }, needItem = false, idItem = 16167 }, -- do crystal de WARZONE 2 DENTRO para WARZONE 2 FORA
	{ posCrystal = { x = 7426, y = 1434, z = 10 }, posGo = { x = 7423, y = 1436, z = 10 }, needItem = false, idItem = 16167 }, -- do crystal de WARZONE 2 FORA para WARZONE 2 DENTRO
	{ posCrystal = { x = 7402, y = 1408, z = 11 }, posGo = { x = 7434, y = 1402, z = 8 }, needItem = false, idItem = 16167 }, -- do crystal de WARZONE 3 para Gnome alpha
	{ posCrystal = { x = 7406, y = 1413, z = 11 }, posGo = { x = 7409, y = 1417, z = 11 }, needItem = false, idItem = 16167 }, -- do crystal de WARZONE 3 DENTRO para WARZONE 3 FORA
	{ posCrystal = { x = 7408, y = 1416, z = 11 }, posGo = { x = 7406, y = 1412, z = 11 }, needItem = false, idItem = 16167 }, -- do crystal de WARZONE 3 FORA para WARZONE 3 DENTRO
	{ posCrystal = { x = 7393, y = 1407, z = 8 }, posGo = { x = 7317, y = 1394, z = 12 }, needItem = true, idItem = 16167 }, -- do crystal de gnome alpha para hot spot
	{ posCrystal = { x = 7317, y = 1393, z = 12 }, posGo = { x = 7392, y = 1407, z = 8 }, needItem = true, idItem = 16167 }, -- do crystal de hot spot para gnome alpha
	{ posCrystal = { x = 7517, y = 1408, z = 9 }, posGo = { x = 7516, y = 1459, z = 9 }, needItem = false, idItem = 16167 }, -- do crystal de WARZONE 1 FORA BOSS para WARZONE 1 DENTRO BOSS
	{ posCrystal = { x = 7535, y = 1476, z = 9 }, posGo = { x = 7413, y = 1399, z = 8 }, needItem = false, idItem = 16167 }, -- do crystal de WARZONE 1 DENTRO BOSS para GNOME ALPHA
	{ posCrystal = { x = 7510, y = 1477, z = 10 }, posGo = { x = 7524, y = 1450, z = 10 }, needItem = true, idItem = 16167 }, -- do crystal de WARZONE 2 FORA BOSS para WARZONE 2 DENTRO BOSS
	{ posCrystal = { x = 7541, y = 1464, z = 10 }, posGo = { x = 7413, y = 1399, z = 8 }, needItem = false, idItem = 16167 }, -- do crystal de WARZONE 2 DENTRO BOSS para GNOME ALPHA
	{ posCrystal = { x = 7486, y = 1380, z = 11 }, posGo = { x = 7496, y = 1405, z = 11 }, needItem = true, idItem = 16167 }, -- do crystal de WARZONE 3 FORA BOSS para WARZONE 3 DENTRO BOSS
	--{posCrystal = {x = 7513, y = 1478, z = 10}, posGo = {x = 7517, y = 1454, z = 10}, needItem = true, idItem = 16167}, -- do crystal de WARZONE 3 FORA BOSS para WARZONE 3 DENTRO BOSS--
	{ posCrystal = { x = 7414, y = 1416, z = 8 }, posGo = { x = 7372, y = 1453, z = 8 }, needItem = true, idItem = 16167 }, -- Golems
	{ posCrystal = { x = 7372, y = 1452, z = 8 }, posGo = { x = 7414, y = 1415, z = 8 }, needItem = true, idItem = 16167 }, -- Golems volta
	{ posCrystal = { x = 7541, y = 1464, z = 10 }, posGo = { x = 7413, y = 1399, z = 8 }, needItem = false, idItem = 16167 }, -- volta gnomevil
	{ posCrystal = { x = 7511, y = 1411, z = 11 }, posGo = { x = 7413, y = 1399, z = 8 }, needItem = false, idItem = 16167 }, -- do crystal de WARZONE 3 DENTRO BOSS para GNOME ALPHA
}

local movement = MoveEvent()

function movement.onStepIn(creature, item, toPosition, fromPosition)
	if isPlayer(creature) then
		local posPlayer = creature:getPosition()
		for i = 1, #teleGnome do
			if teleGnome[i].posCrystal.x == posPlayer.x and teleGnome[i].posCrystal.y == posPlayer.y and teleGnome[i].posCrystal.z == posPlayer.z then
				if teleGnome[i].needItem then
					if doPlayerRemoveItem(creature, teleGnome[i].idItem, 1) then
						doTeleportThing(creature, teleGnome[i].posGo)
						doSendMagicEffect(teleGnome[i].posGo, 10)
					else
						doTeleportThing(creature, fromPosition, true)
						doPlayerSendCancel(creature, "Nie posiadasz krysztalu teleportacyjnego.")
					end
				else
					doTeleportThing(creature, teleGnome[i].posGo)
					doSendMagicEffect(teleGnome[i].posGo, 10)
				end
			end
		end
	end
	return true
end

movement:type("stepin")
movement:id(15320)
movement:register()
